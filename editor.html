<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ACE Editor: submit, beautify and minify</title>
    <style type="text/css" media="screen">
        #ace_js, #ace_css {
            width: 95%;
            height: 15em;
            border: 1px solid silver;
        }
    </style>
</head>
<body>
<form onsubmit="return on_submit()">
    JS
    <div id="ace_js">function foo(items) { var x = "All this is syntax highlighted"; return x; }</div>
    <input type="hidden" id="ace_js_control" name="ace_js" value=""/>
    <button>Go</button>
</form>
<!--suppress JSUnresolvedLibraryURL -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.9.6/ace.js" crossorigin="anonymous"></script>
<!--suppress JSUnresolvedLibraryURL -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.15.1/beautify.min.js" crossorigin="anonymous"></script>

<script>
    var editor_js = ace.edit("ace_js", {
        mode: "ace/mode/javascript",
        minLines: 10,
        maxLines: 10,
        tabSize: 4,
        showPrintMargin: false
    });

    /**
     * @link https://github.com/beautify-web/js-beautify
     */
    editor_js.getSession().setValue(js_beautify(editor_js.getValue(), {
        indent_size: 4
    }));

    function on_submit() {
        document.getElementById("ace_js_control").value = editor_js.getValue().replace(/[\s]+/g, " ");
        return true;
    }
</script>
</body>
</html>